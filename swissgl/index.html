<!doctype html>
<html lang="en">
  <head>
    <title>SwissGL demos</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="demo/style.css" />
  </head>
  <body>
    <details id="panel" open>
      <summary><a href="https://github.com/google/swissgl">SwissGL</a> demos</summary>
      <div id="cards"></div>
    </details>
    <div id="demo">
      <canvas id="c" width="640" height="360"></canvas>
      <div id="buttons">
        <button title="VR" onclick="toggleVR()" id="vrButton">VR</button>
        <button title="AR" onclick="toggleAR()" id="arButton">AR</button>
        <button title="settings" onclick="toggleGui()" id="settingButton" style="font-size: 180%">
          ⛯
        </button>
        <button title="source code"><a id="sourceLink" href="" target="_blank">&lt;&gt;</a></button>
        <button title="fullscreen" onclick="fullscreen()">⛶</button>
      </div>
    </div>
    <button title="about" id="aboutButton" onclick="showAbout()">?</button>
    <div id="about">
      <p>
        <a href="https://github.com/google/swissgl"><b>SwissGL</b></a>
        is a prototype of a minimal yet expressive GPU library built on WebGL2. A single
        <nobr>"glsl()"</nobr> function runs GLSL code snippets on the GPU and manages the resulting
        texture buffers.
      </p>
      <p>
        This page contains a few demos built using the library. Click the
        <nobr>"&lt;&gt;"</nobr> button to see the source of the current example.
      </p>
      <button style="font-size: 20px; margin: auto" onclick="hideAbout()">hide</button>
    </div>
    <script type="module">
      import './demo/dat.gui.min.js';

      import NeuralCA from './demo/NeuralCA.js';
      import BitField from './demo/BitField.js';
      import GameOfLife from './demo/GameOfLife.js';
      import ParticleLife from './demo/ParticleLife.js';
      import ParticleLenia from './demo/ParticleLenia.js';
      import FancyLenia from './demo/FancyLenia.js';
      import Spectrogram from './demo/Spectrogram.js';
      import Physarum from './demo/Physarum.js';
      import SurfaceNormals from './demo/SurfaceNormals.js';
      import MeshGrid from './demo/MeshGrid.js';
      import CubeDeform from './demo/CubeDeform.js';
      import ColorCube from './demo/ColorCube.js';
      import Shadowmap from './demo/Shadowmap.js';
      import ParticleLife3d from './demo/ParticleLife3d.js';
      import Torus4d from './demo/Torus4d.js';
      import DeferredShading from './demo/DeferredShading.js';
      import Springs from './demo/Springs.js';
      import DotCamera from './demo/DotCamera.js';
      import ReactionDiffusion from './demo/ReactionDiffusion.js';
      import Physarum3d from './demo/Physarum3d.js';
      import TextureSamplers from './demo/TextureSamplers.js';
      import LargeLenia from './demo/LargeLenia.js';
      import DemoApp, { $ } from './demo/main.js';

      const app = new DemoApp([
        NeuralCA,
        DotCamera,
        MeshGrid,
        ParticleLife,
        ParticleLife3d,
        BitField,
        TextureSamplers,
        GameOfLife,
        ParticleLenia,
        FancyLenia,
        LargeLenia,
        Spectrogram,
        Physarum,
        Physarum3d,
        SurfaceNormals,
        CubeDeform,
        ColorCube,
        Shadowmap,
        Torus4d,
        DeferredShading,
        Springs,
        ReactionDiffusion,
      ]);
      function fullscreen() {
        app.fullscreen();
      }
      function toggleGui() {
        app.toggleGui();
      }
      function toggleVR() {
        app.toggleXR('vr');
      }
      function toggleAR() {
        app.toggleXR('ar');
      }
      const showAbout = () => {
        $('#about').style.display = 'block';
      };
      const hideAbout = () => {
        $('#about').style.display = 'none';
      };

      Object.assign(window, {
        fullscreen,
        toggleGui,
        toggleVR,
        toggleAR,
        showAbout,
        hideAbout,
      });

      //hideAbout();
      $('#demo').addEventListener('pointerdown', () => {
        hideAbout();
        if (window.innerWidth < 500) {
          // close menu on small screens
          $('#panel').removeAttribute('open');
        }
      });
      $('#panel').addEventListener('click', hideAbout);
    </script>
  </body>
</html>
